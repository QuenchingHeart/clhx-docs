# 2.5 接口模块

以组为单位包含了服务器程序为客户端提供的所有接口 \(即 API\)。

## 2.5.1 用户 API 组

### 2.5.1.1 用户登录 API

{% api-method method="post" host="https://api.smartcommunity.mrdrivingduck.cn" path="/login" %}
{% api-method-summary %}
用户登录接口
{% endapi-method-summary %}

{% api-method-description %}
根据客户端提供的 JSON code，向微信后台获取微信用户的 Open ID 与头像 URL，并保存到数据库中。如果数据库中已经包含了这个 Open ID，则说明用户已存在，登录成功；如果数据库中没有这个 Open ID，说明用户第一次进入应用，将用户的所有数据保存到数据库中后，登录成功。  
登录成功后，服务器程序将生成 token 返回客户端。客户端的后续动作需要在请求头中加入 token 作为认证信息。
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-body-parameters %}
{% api-method-parameter name="avatarUrl" type="string" required=true %}
微信用户的头像 URL
{% endapi-method-parameter %}

{% api-method-parameter name="nickName" type="string" required=true %}
微信用户昵称
{% endapi-method-parameter %}

{% api-method-parameter name="jsonCode" type="string" required=true %}
微信客户端提供的 JSON code
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}
登录成功，向客户端返回 token 和用户 ID
{% endapi-method-response-example-description %}

```
{
  "token": "string",
  "userID": 0
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
微信未对该用户授权，JSON code 不合法
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.1.2 用户昵称更新 API

{% api-method method="put" host="https://api.smartcommunity.mrdrivingduck.cn" path="/user/nickname" %}
{% api-method-summary %}
更新用户昵称
{% endapi-method-summary %}

{% api-method-description %}
用户在注册后默认使用微信昵称。通过调用该接口，用户可以修改自己在小程序中的昵称。
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
用户 ID
{% endapi-method-parameter %}

{% api-method-parameter name="nickname" type="string" required=true %}
修改后的用户昵称
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "nickname": "string",
  "userID": 0
}
```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

## 2.5.2 状态 API 组

### 2.5.2.1 状态检测 API

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/status" %}
{% api-method-summary %}
接口状态检测
{% endapi-method-summary %}

{% api-method-description %}
 用于测试服务器的所有 API 接口是否处于正常运行状态
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
"API status: OK."
```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

## 2.5.3 组织 API 组

### 2.5.3.1 获取用户所在组织

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/in" %}
{% api-method-summary %}
获取用户所在组织
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
被查询的用户 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
[
  {
    "orgID": 0,
    "name": "string",
    "longitude": 0,
    "latitude": 0,
    "address": "string",
    "contactName": "string",
    "contactPhone": "string"
  }
]
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.2 获取用户创建的组织

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/owned" %}
{% api-method-summary %}
获取用户创建的组织
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
被查询的用户 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}
返回用户创建的所有组织
{% endapi-method-response-example-description %}

```
[
  {
    "orgID": 0,
    "name": "string",
    "longitude": 0,
    "latitude": 0,
    "address": "string",
    "contactName": "string",
    "contactPhone": "string"
  }
]
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.3 获取组织中的所有成员

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/member" %}
{% api-method-summary %}
获取组织中的所有成员
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
用户 ID \(用户需要在组织内\)
{% endapi-method-parameter %}

{% api-method-parameter name="organizationID" type="integer" required=true %}
组织 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
[
  {
    "userID": 0,
    "name": "string"
  }
]
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.4 获取所有符合条件的组织

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization" %}
{% api-method-summary %}
获取符合条件的组织
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="keyword" type="string" required=false %}
组织名称关键字
{% endapi-method-parameter %}

{% api-method-parameter name="orgID" type="string" required=false %}
组织 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
[
  {
    "orgID": 0,
    "name": "string",
    "longitude": 0,
    "latitude": 0,
    "address": "string",
    "contactName": "string",
    "contactPhone": "string"
  }
]
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.5 创建组织

{% api-method method="post" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization" %}
{% api-method-summary %}
创建组织
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-body-parameters %}
{% api-method-parameter name="name" type="string" required=true %}
组织名称
{% endapi-method-parameter %}

{% api-method-parameter name="longitude" type="number" required=true %}
组织位置 \(经度\)
{% endapi-method-parameter %}

{% api-method-parameter name="latitude" type="number" required=true %}
组织位置 \(纬度\)
{% endapi-method-parameter %}

{% api-method-parameter name="address" type="string" required=true %}
组织地址
{% endapi-method-parameter %}

{% api-method-parameter name="contactName" type="string" required=true %}
组织联系人
{% endapi-method-parameter %}

{% api-method-parameter name="contactPhone" type="string" required=true %}
组织联系号码
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=201 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "orgID": 0,
  "name": "string",
  "longitude": 0,
  "latitude": 0,
  "address": "string",
  "contactName": "string",
  "contactPhone": "string"
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
用户不存在
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.6 更新组织信息

{% api-method method="put" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization" %}
{% api-method-summary %}
更新组织信息
{% endapi-method-summary %}

{% api-method-description %}
参数可选，不存在的字段就不更新
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}

{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-body-parameters %}
{% api-method-parameter name="orgID" type="integer" required=true %}
组织 ID
{% endapi-method-parameter %}

{% api-method-parameter name="name" type="string" required=false %}
组织名称
{% endapi-method-parameter %}

{% api-method-parameter name="longitude" type="number" required=false %}
组织位置 \(经度\)
{% endapi-method-parameter %}

{% api-method-parameter name="latitude" type="number" required=false %}
组织位置 \(纬度\)
{% endapi-method-parameter %}

{% api-method-parameter name="address" type="string" required=false %}
组织地址
{% endapi-method-parameter %}

{% api-method-parameter name="contactName" type="string" required=false %}
组织联系人
{% endapi-method-parameter %}

{% api-method-parameter name="contactPhone" type="string" required=false %}
组织联系号码
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "orgID": 0,
  "name": "string",
  "longitude": 0,
  "latitude": 0,
  "address": "string",
  "contactName": "string",
  "contactPhone": "string"
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
用户不存在
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.7 解散组织

{% api-method method="delete" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization" %}
{% api-method-summary %}
解散组织
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
组织所有者 ID
{% endapi-method-parameter %}

{% api-method-parameter name="organizationID" type="integer" required=true %}
组织 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=204 %}
{% api-method-response-example-description %}
删除成功
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
组织不存在
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.8 申请加入组织

{% api-method method="post" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/apply" %}
{% api-method-summary %}
申请加入组织
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}

{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-body-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
用户 ID
{% endapi-method-parameter %}

{% api-method-parameter name="organizationID" type="integer" required=true %}
组织 ID
{% endapi-method-parameter %}

{% api-method-parameter name="detail" type="string" required=true %}
申请内容
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=201 %}
{% api-method-response-example-description %}
申请提交成功
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.9 获取用户的所有组织申请信息

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/apply" %}
{% api-method-summary %}
获取用户的所有组织申请信息
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
用户 ID
{% endapi-method-parameter %}

{% api-method-parameter name="status" type="string" required=false %}
申请状态，默认为 '待审核'
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
[
  {
    "userID": 0,
    "organizationID": 0,
    "detail": "string"
  }
]
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
找不到用户或组织
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.10 退出组织

{% api-method method="delete" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/quit" %}
{% api-method-summary %}
退出组织
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
用户 ID
{% endapi-method-parameter %}

{% api-method-parameter name="organizationID" type="integer" required=true %}
用户希望退出的组织 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=204 %}
{% api-method-response-example-description %}
成功退出组织
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.11 审核组织加入申请

{% api-method method="put" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/audit" %}
{% api-method-summary %}
审核组织加入申请
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}

{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-body-parameters %}
{% api-method-parameter name="userID" type="integer" required=true %}
申请人用户 ID
{% endapi-method-parameter %}

{% api-method-parameter name="applyID" type="integer" required=true %}
申请 ID
{% endapi-method-parameter %}

{% api-method-parameter name="agree" type="boolean" required=true %}
是否同意申请
{% endapi-method-parameter %}

{% api-method-parameter name="reason" type="string" required=true %}
理由
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=204 %}
{% api-method-response-example-description %}
审核提交成功
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.3.12 获取组织加入申请

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/organization/audit" %}
{% api-method-summary %}
获取组织加入申请
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}

{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-body-parameters %}
{% api-method-parameter name="organizationID" type="integer" required=true %}
组织 ID
{% endapi-method-parameter %}

{% api-method-parameter name="status" type="string" required=false %}
申请状态 \(默认为 '待审核'\)
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

## 2.5.4 需求 API 组

### 2.5.4.1 按条件获取需求

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/demands" %}
{% api-method-summary %}
按条件获取需求
{% endapi-method-summary %}

{% api-method-description %}
出现在请求中的参数将被作为过滤条件
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="userID" type="integer" required=false %}
用户 ID
{% endapi-method-parameter %}

{% api-method-parameter name="category" type="string" required=false %}
需求类型
{% endapi-method-parameter %}

{% api-method-parameter name="distrct" type="string" required=false %}
需求所在地区
{% endapi-method-parameter %}

{% api-method-parameter name="keyword" type="string" required=false %}
需求关键字
{% endapi-method-parameter %}

{% api-method-parameter name="status" type="string" required=false %}
需求状态 \('已发布', '已完成', '对接中'\)
{% endapi-method-parameter %}

{% api-method-parameter name="location" type="object" required=false %}
需求地点
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
[
  {
    "title": "string",
    "pageView": 0,
    "category": "大类:小类",
    "interval": {
      "startTime": 0,
      "endTime": 0
    },
    "location": {
      "longitude": 0,
      "latitude": 0,
      "district": "string"
    },
    "status": "已发布",
    "distance": 0
  }
]
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
指定用户不存在
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.4.2 获取所有需求的位置

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/demands/location" %}
{% api-method-summary %}
获取所有需求的位置
{% endapi-method-summary %}

{% api-method-description %}
用于地图上的需求展示
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "demandID": 0,
  "longitude": 0,
  "latitude": 0,
  "status": "已发布",
  "titile": "string"
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.4.3 获取不同状态的需求个数

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/demands/count" %}
{% api-method-summary %}
获取不同状态的需求个数
{% endapi-method-summary %}

{% api-method-description %}
用于首页上的需求状态展示
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "published": 0,
  "connecting": 0,
  "completed": 0
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.4.4 获取需求详情

{% api-method method="get" host="https://api.smartcommunity.mrdrivingduck.cn" path="/demand" %}
{% api-method-summary %}
获取需求详情
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="demandID" type="integer" required=true %}
需求 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "demandID": 0,
  "createdAt": 0,
  "pageView": 0,
  "createdBy": {
    "publishUserID": 0,
    "publishUserName": "string",
    "isOrganization": true
  },
  "contactName": "string",
  "contactPhone": "string",
  "location": {
    "longitude": 0,
    "latitude": 0,
    "district": "string"
  },
  "interval": {
    "startTime": 0,
    "endTime": 0
  },
  "category": "大类:小类",
  "title": "【XX社区】紧缺口罩",
  "detail": "本社区紧缺口罩......",
  "status": "已发布"
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
指定需求不存在
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.4.5 发布需求

{% api-method method="post" host="https://api.smartcommunity.mrdrivingduck.cn" path="/demand" %}
{% api-method-summary %}
发布需求
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}

{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-body-parameters %}
{% api-method-parameter name="interval" type="object" required=true %}
需求时间间隔
{% endapi-method-parameter %}

{% api-method-parameter name="location" type="object" required=true %}
需求地点
{% endapi-method-parameter %}

{% api-method-parameter name="title" type="string" required=true %}
需求标题
{% endapi-method-parameter %}

{% api-method-parameter name="detail" type="string" required=true %}
需求详情
{% endapi-method-parameter %}

{% api-method-parameter name="category" type="string" required=true %}
需求分类
{% endapi-method-parameter %}

{% api-method-parameter name="status" type="string" required=true %}
需求状态
{% endapi-method-parameter %}

{% api-method-parameter name="contactName" type="string" required=true %}
需求联系人名字
{% endapi-method-parameter %}

{% api-method-parameter name="contactPhone" type="string" required=true %}
需求联系人号码
{% endapi-method-parameter %}

{% api-method-parameter name="createdBy" type="object" required=true %}
需求创建方信息
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=201 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "demandID": 0,
  "createdAt": 0,
  "pageView": 0,
  "createdBy": {
    "publishUserID": 0,
    "publishUserName": "string",
    "isOrganization": true
  },
  "contactName": "string",
  "contactPhone": "string",
  "location": {
    "longitude": 0,
    "latitude": 0,
    "district": "string"
  },
  "interval": {
    "startTime": 0,
    "endTime": 0
  },
  "category": "大类:小类",
  "title": "【XX社区】紧缺口罩",
  "detail": "本社区紧缺口罩......",
  "status": "已发布"
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
用户不存在
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.4.6 更新需求

{% api-method method="put" host="https://api.smartcommunity.mrdrivingduck.cn" path="/demand" %}
{% api-method-summary %}
更新需求
{% endapi-method-summary %}

{% api-method-description %}
在请求中存在的字段将被更新，不存在的字段保持不变
{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}

{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-body-parameters %}
{% api-method-parameter name="interval" type="object" required=false %}
需求时间间隔
{% endapi-method-parameter %}

{% api-method-parameter name="location" type="object" required=false %}
需求地点
{% endapi-method-parameter %}

{% api-method-parameter name="title" type="string" required=false %}
需求标题
{% endapi-method-parameter %}

{% api-method-parameter name="detail" type="string" required=false %}
需求详情
{% endapi-method-parameter %}

{% api-method-parameter name="category" type="string" required=false %}
需求分类
{% endapi-method-parameter %}

{% api-method-parameter name="contactName" type="string" required=false %}
需求联系人名字
{% endapi-method-parameter %}

{% api-method-parameter name="contactPhone" type="string" required=false %}
需求联系人号码
{% endapi-method-parameter %}
{% endapi-method-body-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=200 %}
{% api-method-response-example-description %}

{% endapi-method-response-example-description %}

```
{
  "demandID": 0,
  "createdAt": 0,
  "pageView": 0,
  "createdBy": {
    "publishUserID": 0,
    "publishUserName": "string",
    "isOrganization": true
  },
  "contactName": "string",
  "contactPhone": "string",
  "location": {
    "longitude": 0,
    "latitude": 0,
    "district": "string"
  },
  "interval": {
    "startTime": 0,
    "endTime": 0
  },
  "category": "大类:小类",
  "title": "【XX社区】紧缺口罩",
  "detail": "本社区紧缺口罩......",
  "status": "已发布"
}
```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=404 %}
{% api-method-response-example-description %}
需求不存在
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}

### 2.5.4.7 撤销需求

{% api-method method="delete" host="https://api.smartcommunity.mrdrivingduck.cn" path="/demand" %}
{% api-method-summary %}
撤销需求
{% endapi-method-summary %}

{% api-method-description %}

{% endapi-method-description %}

{% api-method-spec %}
{% api-method-request %}
{% api-method-headers %}
{% api-method-parameter name="Authorization" type="string" required=true %}
Token
{% endapi-method-parameter %}
{% endapi-method-headers %}

{% api-method-query-parameters %}
{% api-method-parameter name="demandID" type="integer" required=true %}
需求 ID
{% endapi-method-parameter %}
{% endapi-method-query-parameters %}
{% endapi-method-request %}

{% api-method-response %}
{% api-method-response-example httpCode=204 %}
{% api-method-response-example-description %}
需求撤销成功
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=401 %}
{% api-method-response-example-description %}
Token 未授权
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}

{% api-method-response-example httpCode=500 %}
{% api-method-response-example-description %}
服务器内部错误
{% endapi-method-response-example-description %}

```

```
{% endapi-method-response-example %}
{% endapi-method-response %}
{% endapi-method-spec %}
{% endapi-method %}



